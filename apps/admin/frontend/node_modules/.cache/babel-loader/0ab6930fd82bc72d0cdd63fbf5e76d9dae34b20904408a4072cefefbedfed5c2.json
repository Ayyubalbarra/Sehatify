{"ast":null,"code":"var _jsxFileName = \"C:\\\\Sehatify\\\\apps\\\\admin\\\\frontend\\\\src\\\\pages\\\\Dashboard.tsx\",\n  _s = $RefreshSig$();\n// File: src/pages/Dashboard.tsx\n\nimport React from 'react';\nimport { useQuery } from '@tanstack/react-query';\n// [FIX 3] Impor fungsi API yang baru dari objek dashboardAPI\nimport { dashboardAPI } from '../services/api.ts';\nimport { Chart as ChartJS, CategoryScale, LinearScale, PointElement, LineElement, Title, Tooltip, Legend, Filler } from 'chart.js';\nimport { Users, AlertTriangle } from 'lucide-react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nChartJS.register(CategoryScale, LinearScale, PointElement, LineElement, Title, Tooltip, Legend, Filler);\n\n// Komponen Kartu Metrik (Tidak ada perubahan)\nconst MetricCard = ({\n  title,\n  value,\n  icon: Icon,\n  color\n}) => /*#__PURE__*/_jsxDEV(\"div\", {\n  className: `p-6 rounded-lg shadow-md text-white ${color}`,\n  children: /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"flex items-center justify-between\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-sm opacity-90\",\n        children: title\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 18,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-2xl font-bold\",\n        children: value\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 19,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 17,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Icon, {\n      className: \"h-8 w-8 opacity-80\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 21,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 16,\n    columnNumber: 5\n  }, this)\n}, void 0, false, {\n  fileName: _jsxFileName,\n  lineNumber: 15,\n  columnNumber: 3\n}, this);\n_c = MetricCard;\nconst Dashboard = () => {\n  _s();\n  var _weeklyChart$datasets, _weeklyChart$datasets2, _weeklyChart$datasets3, _weeklyChart$datasets4;\n  // [FIX 4] Gunakan fungsi dan queryKey yang baru\n  const {\n    data: overviewData,\n    isLoading: overviewLoading,\n    error: overviewError\n  } = useQuery({\n    queryKey: ['dashboardOverview'],\n    queryFn: dashboardAPI.getOverview\n  });\n  const {\n    data: chartData,\n    isLoading: chartLoading,\n    error: chartError\n  } = useQuery({\n    queryKey: ['weeklyPatientsChart'],\n    queryFn: () => dashboardAPI.getChartData('weekly-patients') // Panggil dengan parameter\n  });\n\n  // ... sisa kode ...\n\n  if (overviewLoading || chartLoading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"text-center p-8\",\n      children: \"Memuat data dasbor...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 12\n    }, this);\n  }\n  if (overviewError || chartError) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"text-center p-8 text-red-500\",\n      children: \"Gagal memuat data dasbor. Coba muat ulang halaman.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 12\n    }, this);\n  }\n  const overviewMetrics = overviewData === null || overviewData === void 0 ? void 0 : overviewData.data;\n  const weeklyChart = chartData === null || chartData === void 0 ? void 0 : chartData.data;\n  const lineChartData = {\n    labels: (weeklyChart === null || weeklyChart === void 0 ? void 0 : weeklyChart.labels) || [],\n    datasets: [{\n      label: (weeklyChart === null || weeklyChart === void 0 ? void 0 : (_weeklyChart$datasets = weeklyChart.datasets) === null || _weeklyChart$datasets === void 0 ? void 0 : (_weeklyChart$datasets2 = _weeklyChart$datasets[0]) === null || _weeklyChart$datasets2 === void 0 ? void 0 : _weeklyChart$datasets2.label) || 'Pasien',\n      data: (weeklyChart === null || weeklyChart === void 0 ? void 0 : (_weeklyChart$datasets3 = weeklyChart.datasets) === null || _weeklyChart$datasets3 === void 0 ? void 0 : (_weeklyChart$datasets4 = _weeklyChart$datasets3[0]) === null || _weeklyChart$datasets4 === void 0 ? void 0 : _weeklyChart$datasets4.data) || []\n      // ... sisa properti chart\n    }]\n  };\n\n  // ... sisa kode JSX ...\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"space-y-8\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6\",\n      children: [/*#__PURE__*/_jsxDEV(MetricCard, {\n        title: \"Kunjungan Hari Ini\",\n        value: (overviewMetrics === null || overviewMetrics === void 0 ? void 0 : overviewMetrics.todayVisits) || 0,\n        icon: Users,\n        color: \"bg-blue-500\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(MetricCard, {\n        title: \"Antrian Hari Ini\",\n        value: (overviewMetrics === null || overviewMetrics === void 0 ? void 0 : overviewMetrics.todayQueues) || 0,\n        icon: Users,\n        color: \"bg-purple-500\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(MetricCard, {\n        title: \"Gawat Darurat\",\n        value: (overviewMetrics === null || overviewMetrics === void 0 ? void 0 : overviewMetrics.todayEmergencies) || 0,\n        icon: AlertTriangle,\n        color: \"bg-red-500\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 65,\n    columnNumber: 5\n  }, this);\n};\n_s(Dashboard, \"05nWPBFEH0wWFh85RQ/lHwZ7q94=\", false, function () {\n  return [useQuery, useQuery];\n});\n_c2 = Dashboard;\nexport default Dashboard;\nvar _c, _c2;\n$RefreshReg$(_c, \"MetricCard\");\n$RefreshReg$(_c2, \"Dashboard\");","map":{"version":3,"names":["React","useQuery","dashboardAPI","Chart","ChartJS","CategoryScale","LinearScale","PointElement","LineElement","Title","Tooltip","Legend","Filler","Users","AlertTriangle","jsxDEV","_jsxDEV","register","MetricCard","title","value","icon","Icon","color","className","children","fileName","_jsxFileName","lineNumber","columnNumber","_c","Dashboard","_s","_weeklyChart$datasets","_weeklyChart$datasets2","_weeklyChart$datasets3","_weeklyChart$datasets4","data","overviewData","isLoading","overviewLoading","error","overviewError","queryKey","queryFn","getOverview","chartData","chartLoading","chartError","getChartData","overviewMetrics","weeklyChart","lineChartData","labels","datasets","label","todayVisits","todayQueues","todayEmergencies","_c2","$RefreshReg$"],"sources":["C:/Sehatify/apps/admin/frontend/src/pages/Dashboard.tsx"],"sourcesContent":["// File: src/pages/Dashboard.tsx\n\nimport React from 'react';\nimport { useQuery } from '@tanstack/react-query';\n// [FIX 3] Impor fungsi API yang baru dari objek dashboardAPI\nimport { dashboardAPI } from '../services/api.ts'; \nimport { Line } from 'react-chartjs-2';\nimport { Chart as ChartJS, CategoryScale, LinearScale, PointElement, LineElement, Title, Tooltip, Legend, Filler } from 'chart.js';\nimport { Users, AlertTriangle, Droplets, BedDouble } from 'lucide-react';\n\nChartJS.register(CategoryScale, LinearScale, PointElement, LineElement, Title, Tooltip, Legend, Filler);\n\n// Komponen Kartu Metrik (Tidak ada perubahan)\nconst MetricCard: React.FC<{ title: string; value: string | number; icon: React.ElementType, color: string }> = ({ title, value, icon: Icon, color }) => (\n  <div className={`p-6 rounded-lg shadow-md text-white ${color}`}>\n    <div className=\"flex items-center justify-between\">\n      <div>\n        <p className=\"text-sm opacity-90\">{title}</p>\n        <p className=\"text-2xl font-bold\">{value}</p>\n      </div>\n      <Icon className=\"h-8 w-8 opacity-80\" />\n    </div>\n  </div>\n);\n\nconst Dashboard: React.FC = () => {\n  // [FIX 4] Gunakan fungsi dan queryKey yang baru\n  const { data: overviewData, isLoading: overviewLoading, error: overviewError } = useQuery({\n    queryKey: ['dashboardOverview'],\n    queryFn: dashboardAPI.getOverview,\n  });\n\n  const { data: chartData, isLoading: chartLoading, error: chartError } = useQuery({\n    queryKey: ['weeklyPatientsChart'],\n    queryFn: () => dashboardAPI.getChartData('weekly-patients'), // Panggil dengan parameter\n  });\n\n  // ... sisa kode ...\n\n  if (overviewLoading || chartLoading) {\n    return <div className=\"text-center p-8\">Memuat data dasbor...</div>;\n  }\n\n  if (overviewError || chartError) {\n    return <div className=\"text-center p-8 text-red-500\">Gagal memuat data dasbor. Coba muat ulang halaman.</div>;\n  }\n  \n  const overviewMetrics = overviewData?.data;\n  const weeklyChart = chartData?.data;\n\n  const lineChartData = {\n    labels: weeklyChart?.labels || [],\n    datasets: [\n      {\n        label: weeklyChart?.datasets?.[0]?.label || 'Pasien',\n        data: weeklyChart?.datasets?.[0]?.data || [],\n        // ... sisa properti chart\n      },\n    ],\n  };\n  \n  // ... sisa kode JSX ...\n\n  return (\n    <div className=\"space-y-8\">\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6\">\n        <MetricCard title=\"Kunjungan Hari Ini\" value={overviewMetrics?.todayVisits || 0} icon={Users} color=\"bg-blue-500\" />\n        <MetricCard title=\"Antrian Hari Ini\" value={overviewMetrics?.todayQueues || 0} icon={Users} color=\"bg-purple-500\" />\n        <MetricCard title=\"Gawat Darurat\" value={overviewMetrics?.todayEmergencies || 0} icon={AlertTriangle} color=\"bg-red-500\" />\n        {/* Placeholder untuk metrik lain jika ada */}\n      </div>\n       {/* ... sisa kode JSX untuk menampilkan chart dan lainnya ... */}\n    </div>\n  );\n};\n\nexport default Dashboard;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}